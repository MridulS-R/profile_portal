<div class="col-md-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <div class="d-flex align-items-center gap-3">
        <% if @user.avatar_url.present? %>
          <img src="<%= @user.avatar_url %>" class="rounded-circle border" alt="Avatar" width="56" height="56">
        <% end %>
        <div>
          <h1 class="h4 mb-0"><%= @user.name %></h1>
          <% if @user.github_username.present? %>
            <div class="text-muted">@<%= @user.github_username %></div>
          <% end %>
        </div>
      </div>
      <% if @user.bio.present? %>
        <p class="mt-3 mb-0"><%= @user.bio %></p>
      <% end %>
      <% if @user.respond_to?(:location) && @user.location.present? %>
        <p class="mt-2 mb-0"><span class="fw-semibold">Location:</span> <%= @user.location %></p>
      <% end %>
      <% if @user.respond_to?(:skills) && @user.skills.present? %>
        <p class="mt-2 mb-0"><span class="fw-semibold">Skills:</span> <%= @user.skills %></p>
      <% end %>
      <% if @user.respond_to?(:views_count) %>
        <p class="mt-2 mb-0 text-muted small">Views: <%= @user.views_count %></p>
      <% end %>
      <hr>
      <ul class="list-unstyled small mb-3">
        <% if @user.website.present? %><li><a href="<%= @user.website %>" target="_blank" rel="noopener">Website</a></li><% end %>
        <% if @user.github_url.present? %><li><a href="<%= @user.github_url %>" target="_blank" rel="noopener">GitHub</a></li><% end %>
        <% if @user.twitter_url.present? %><li><a href="<%= @user.twitter_url %>" target="_blank" rel="noopener">Twitter/X</a></li><% end %>
        <% if @user.linkedin_url.present? %><li><a href="<%= @user.linkedin_url %>" target="_blank" rel="noopener">LinkedIn</a></li><% end %>
        <% if @user.youtube_url.present? %><li><a href="<%= @user.youtube_url %>" target="_blank" rel="noopener">YouTube</a></li><% end %>
      </ul>
      <div class="d-flex flex-wrap gap-2">
        <%= link_to "View Projects", projects_path(username: @user.github_username), class: "btn btn-primary btn-sm" %>
        <% if @user.respond_to?(:domains) && @user.domains.any? %>
          <% @user.domains.each do |d| %>
            <a href="http://<%= d.host %>" class="btn btn-outline-secondary btn-sm">Visit <%= d.host %></a>
          <% end %>
        <% end %>
        <% if @user.resume.attached? %>
          <%= link_to "Download Resume", profile_resume_path(@user), class: "btn btn-outline-primary btn-sm" %>
        <% end %>
        <% if @user.respond_to?(:resume_scan_status) && @user.resume.attached? %>
          <% case @user.resume_scan_status %>
          <% when 'pending' %>
            <span class="badge rounded-pill text-bg-warning align-self-center">Resume scan: pending</span>
          <% when 'infected' %>
            <span class="badge rounded-pill text-bg-danger align-self-center">Resume scan: infected</span>
          <% when 'clean' %>
            <span class="badge rounded-pill text-bg-success align-self-center">Resume scan: clean</span>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>

