
<%# app/views/profiles/show.html.erb %>
<div class="flex flex-col gap-6">
  <% if @user.banner_url.present? %>
    <div class="rounded overflow-hidden border border-gray-800">
      <img src="<%= @user.banner_url %>" alt="Banner" class="w-full object-cover max-h-60">
    </div>
  <% end %>

  <div class="flex flex-col md:flex-row gap-6">
    <div class="md:w-1/3 space-y-4">
      <div class="rounded border border-gray-800 p-4 bg-black/30">
        <div class="flex items-center gap-3">
          <% if @user.avatar_url.present? %>
            <img src="<%= @user.avatar_url %>" class="w-14 h-14 rounded-full border border-gray-700" alt="Avatar">
          <% end %>
          <div>
            <h1 class="text-2xl font-bold"><%= @user.name %></h1>
            <% if @user.github_username.present? %>
              <p class="text-gray-400">@<%= @user.github_username %></p>
            <% end %>
          </div>
        </div>
        <% if @user.bio.present? %>
          <p class="mt-3 text-gray-300"><%= @user.bio %></p>
        <% end %>
        <div class="mt-3 space-y-1 text-sm">
          <% if @user.website.present? %><p><a href="<%= @user.website %>" class="text-blue-400 hover:underline" target="_blank" rel="noopener">Website</a></p><% end %>
          <% if @user.github_url.present? %><p><a href="<%= @user.github_url %>" class="text-blue-400 hover:underline" target="_blank" rel="noopener">GitHub</a></p><% end %>
          <% if @user.twitter_url.present? %><p><a href="<%= @user.twitter_url %>" class="text-blue-400 hover:underline" target="_blank" rel="noopener">Twitter/X</a></p><% end %>
          <% if @user.linkedin_url.present? %><p><a href="<%= @user.linkedin_url %>" class="text-blue-400 hover:underline" target="_blank" rel="noopener">LinkedIn</a></p><% end %>
          <% if @user.youtube_url.present? %><p><a href="<%= @user.youtube_url %>" class="text-blue-400 hover:underline" target="_blank" rel="noopener">YouTube</a></p><% end %>
        </div>
        <div class="mt-4 flex gap-3 flex-wrap">
          <%= link_to "View Demos", demos_path(username: @user.github_username), class: "px-3 py-2 rounded bg-blue-600" %>
          <% if @user.respond_to?(:domains) && @user.domains.any? %>
            <% @user.domains.each do |d| %>
              <a href="http://<%= d.host %>" class="px-3 py-2 rounded bg-gray-800 border border-gray-700">Visit <%= d.host %></a>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="md:w-2/3">
      <h2 class="text-xl mb-3 font-semibold">Projects</h2>
      <% if @projects.any? %>
        <div class="grid md:grid-cols-2 gap-4">
          <% @projects.each do |p| %>
            <a href="<%= p.html_url %>" target="_blank" rel="noopener" class="block rounded border border-gray-800 p-4 bg-black/30 hover:border-blue-600">
              <div class="font-semibold"><%= p.repo_full_name %></div>
              <div class="text-sm text-gray-400"><%= p.description %></div>
              <div class="mt-2 text-xs text-gray-400">
                Last updated: <%= time_ago_in_words(p.pushed_at) %> ago
              </div>
              <div class="mt-3 flex items-center gap-3 text-sm text-gray-300">
                <span>‚≠ê <%= p.stars %></span>
                <span>üç¥ <%= p.forks %></span>
                <span>üêû <%= p.open_issues %></span>
                <% if p.language.present? %><span><%= p.language %></span><% end %>
              </div>
              <% if p.topics.present? %>
                <div class="mt-3 flex flex-wrap gap-2">
                  <% Array(p.topics).each do |t| %>
                    <span class="px-2 py-0.5 text-xs rounded-full border border-gray-700 bg-gray-800/50"><%= t %></span>
                  <% end %>
                </div>
              <% end %>
            </a>
          <% end %>
        </div>
      <% else %>
        <div class="text-gray-400">No projects yet.</div>
      <% end %>
    </div>
  </div>
</div>
