
<div class="row g-4">
  <% if @user.banner_url.present? %>
    <div class="col-12">
      <img src="<%= @user.banner_url %>" alt="Banner" class="img-fluid rounded border">
    </div>
  <% end %>

  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <div class="d-flex align-items-center gap-3">
          <% if @user.avatar_url.present? %>
            <img src="<%= @user.avatar_url %>" class="rounded-circle border" alt="Avatar" width="56" height="56">
          <% end %>
          <div>
            <h1 class="h4 mb-0"><%= @user.name %></h1>
            <% if @user.github_username.present? %>
              <div class="text-muted">@<%= @user.github_username %></div>
            <% end %>
          </div>
        </div>
        <% if @user.bio.present? %>
          <p class="mt-3 mb-0"><%= @user.bio %></p>
        <% end %>
        <% if @user.respond_to?(:location) && @user.location.present? %>
          <p class="mt-2 mb-0"><span class="fw-semibold">Location:</span> <%= @user.location %></p>
        <% end %>
        <% if @user.respond_to?(:skills) && @user.skills.present? %>
          <p class="mt-2 mb-0"><span class="fw-semibold">Skills:</span> <%= @user.skills %></p>
        <% end %>
        <% if @user.respond_to?(:views_count) %>
          <p class="mt-2 mb-0 text-muted small">Views: <%= @user.views_count %></p>
        <% end %>
        <hr>
        <ul class="list-unstyled small mb-3">
          <% if @user.website.present? %><li><a href="<%= @user.website %>" target="_blank" rel="noopener">Website</a></li><% end %>
          <% if @user.github_url.present? %><li><a href="<%= @user.github_url %>" target="_blank" rel="noopener">GitHub</a></li><% end %>
          <% if @user.twitter_url.present? %><li><a href="<%= @user.twitter_url %>" target="_blank" rel="noopener">Twitter/X</a></li><% end %>
          <% if @user.linkedin_url.present? %><li><a href="<%= @user.linkedin_url %>" target="_blank" rel="noopener">LinkedIn</a></li><% end %>
          <% if @user.youtube_url.present? %><li><a href="<%= @user.youtube_url %>" target="_blank" rel="noopener">YouTube</a></li><% end %>
        </ul>
        <div class="d-flex flex-wrap gap-2">
          <%= link_to "View Demos", demos_path(username: @user.github_username), class: "btn btn-primary btn-sm" %>
          <% if @user.respond_to?(:domains) && @user.domains.any? %>
            <% @user.domains.each do |d| %>
              <a href="http://<%= d.host %>" class="btn btn-outline-secondary btn-sm">Visit <%= d.host %></a>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-8">
    <h2 class="h5 mb-3">Projects</h2>
    <% if @projects.any? %>
      <div class="row g-3">
        <% @projects.each do |p| %>
          <div class="col-md-6">
            <a href="<%= p.html_url %>" target="_blank" rel="noopener" class="text-decoration-none text-reset">
              <div class="card h-100 shadow-sm">
                <div class="card-body">
                  <div class="fw-semibold"><%= p.repo_full_name %></div>
                  <div class="text-muted small"><%= p.description %></div>
                  <div class="text-muted small mt-2">Last updated: <%= time_ago_in_words(p.pushed_at) %> ago</div>
                  <div class="mt-2 d-flex gap-2 small">
                    <span class="badge bg-warning-subtle text-warning-emphasis border border-warning-subtle">‚≠ê <%= p.stars %></span>
                    <span class="badge bg-secondary-subtle text-secondary-emphasis border border-secondary-subtle">üç¥ <%= p.forks %></span>
                    <span class="badge bg-danger-subtle text-danger-emphasis border border-danger-subtle">üêû <%= p.open_issues %></span>
                    <% if p.language.present? %><span class="badge bg-light text-dark border"><%= p.language %></span><% end %>
                  </div>
                  <% if p.topics.present? %>
                    <div class="mt-2 d-flex flex-wrap gap-1">
                      <% Array(p.topics).each do |t| %>
                        <span class="badge text-bg-light"><%= t %></span>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </div>
            </a>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-muted">No projects yet.</div>
    <% end %>
  </div>
</div>
